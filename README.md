# Testes automatizados, da ferramenta GitLab, com Cypress  

O objetivo deste projeto √© realizar testes com Cypress utilizando uma vers√£o open-source do GitLab, rodando em um container Docker em seu ambiente local. 

Obs: Testes realizados no escopo das aulas do curso Intermedi√°rio Cypress - https://github.com/wlsf82/cypress-intermediario-v2

## Funcionalidades da aplica√ß√£o que ser√£o testadas
O GitLab possui diversas funcionalidades, por√©m, duruante este projeto testaremos as listadas abaixo, tanto via API (Application Programming Interface), como via GUI (Graphical User Interface), al√©m de testar uma delas (o git clone) via CLI (Command Line Interface).

    Login
    Logout
    Cria√ß√£o de projeto
    Cria√ß√£o de issue
    Adi√ß√£o de uma etiqueta (label) √† uma issue
    Adi√ß√£o de um marco (milestone) √† uma issue
    Git clone

## Pr√©-requisitos

Antes de come√ßar, garanta que os seguintes requisitos sejam atendidos:

Computador com no m√≠nimo 2 cores
e no m√≠nimo 8 GB de mem√≥ria RAM
Al√©m disso, garanta que os seguintes sistemas estejam instalados em seu computador:

Durante os testes utilizei as seguintes vers√µes:

    Docker (vers√£o 20.10.22)
    git (vers√£o 2.37.2.windows.2)
    Node.js (v18.12.1)
    npm (8.19.2)
    Visual Studio Code (1.75.0)
    Cypress (12.0.2)
    @faker-js/faker (7.6.0)
    cypress-plugin-api (2.6.1)

# _Setup_ do ambiente local com Docker

Com o docker rodando em seu computador, execute o comando `docker run --publish 80:80 --publish 22:22 --hostname localhost wlsf82/gitlab-ce` e aguarde at√© o ambiente inicializar.

> üïê Isso por levar alguns minutos.
>
> ‚òï Portanto, recomendo pegar um caf√© (ou um ch√°) enquanto aguarda.

Depois de alguns minutos, acesse a URL http://localhost para definir a senha do usu√°rio `root`.

## Definindo a senha do usu√°rio `root`

Ao acessar a URL http://localhost, voc√™ deve ver uma p√°gina para trocar a senha do usu√°rio `root`, conforme abaixo:

![GitLab reset password page](./assets/please-create-a-password-for-your-new-account.png)

Digite uma senha, confirme a mesma e clique no bot√£o _Change your password_.

> A senha definida aqui ser√° usada na aula 1, portanto, use uma senha que ir√° se lembrar (ou tome nota).

## Criando um Access Token

1. Fa√ßa login com o usu√°rio `root` com a senha definida na se√ß√£o anterior
2. Clique no avatar do usu√°rio no canto superior direito da tela; clique no link _Settings_, e ent√£o; clique na op√ß√£o _Access Tokens_ (no menu lateral esquerdo)
3. No campo nome, digite o valor `cypress-intermediario-v2`; na se√ß√£o _Scopes_ marque a op√ß√£o **api**; e ent√£o, clique no bot√£o _Create personal access token_.

> Uma mensagem de que o _token_ foi criado com sucesso deve ser exibida, al√©m do _token_ propriamente dito. **Copie o _token_ clicando no bot√£o √† direita do campo e guarde-o para utilizar na aula 1**.

## Adicionando uma chave SSH

1. No terminal de linha de comando, digite o seguinte comando e pressione ENTER `ssh-keygen -t ed25519 -C "root@example.com"`
2. Ser√° solicitado um caminho para salvar a chave. Pressione ENTER para aceitar o caminho padr√£o
3. Ser√° solicitada uma senha. Pressione ENTER para que a senha n√£o seja necess√°ria
4. Ser√° solicitado que repita a senha. Pressione ENTER novamente para que a senha n√£o seja necess√°ria
5. De novo no terminal de linha de comando, digite o seguinte comando e pressione ENTER para copiar a chave p√∫blica rec√©m criada para a √°rea de transfer√™ncia `pbcopy < ~/.ssh/id_ed25519.pub`
6. Logado na aplica√ß√£o com o usu√°rio `root`, clique no avatar do usu√°rio no canto superior direito da tela; clique no link _Settings_; e ent√£o, clique na op√ß√£o _SSH Keys_ (no menu lateral esquerdo)
7. Cole sua chave SSH p√∫blica no campo key. O campo _Title_ deve ser automaticamente preenchido
8. Por fim, clique no bot√£o _Add key_.

> Voc√™ tamb√©m encontrar√° instru√ß√µes sobre como gerar a chave SSH em sistema operacional Windows na pr√≥pria aplica√ß√£o em teste (rodando em seu ambiente local com Docker) a partir da seguinte URL http://localhost/help/ssh/README#generating-a-new-ssh-key-pair (**instru√ß√µes em Ingl√™s**).

___

Ok, o ambiente local est√° pronto!
